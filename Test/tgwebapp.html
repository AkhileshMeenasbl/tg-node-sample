<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="format-detection" content="telephone=no" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="MobileOptimized" content="176" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="robots" content="noindex,nofollow" />
  <script src="https://telegram.org/js/telegram-web-app.js?1"></script>
  <script>
    function setThemeClass() {
      document.documentElement.className = Telegram.WebApp.colorScheme;
    }
    Telegram.WebApp.onEvent('themeChanged', setThemeClass);
    setThemeClass();

  </script>
  <style>
    body {
      font-family: sans-serif;
      background-color: rgb(247,166,166));
      /*background-color: var(--tg-theme-bg-color, rgb(247,166,166));*/
      color: var(--tg-theme-text-color, rgb(28,143,238));
      font-size: 16px;
      margin: 0;
      padding: 0;
      color-scheme: var(--tg-color-scheme);
    }
  </style>

</head>

<body style="visibility: hidden;">
  <section>
    <button onclick="toggleMainButton(this);">Hide Main Button</button>
    <div class="hint">
      Theme params
    </div>
  </section>
  <div class="viewport_border"></div>
  <div class="viewport_stable_border"></div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
  <script>
    Telegram.WebApp.ready();

    var initData = Telegram.WebApp.initData || '';
    var initDataUnsafe = Telegram.WebApp.initDataUnsafe || {};

    
    function changeButton() {
      $('button').prop('disabled', true);
      $('#btn_status').text('Changing button...').removeClass('ok err').show();
      $.ajax('/demo/changeMenuButton', {
        type: 'POST',
        data: { _auth: initData },
        dataType: 'json',
        success: function (result) {
          $('button').prop('disabled', false);
          if (result.response) {
            if (result.response.ok) {
              $('#btn_status').html('Button changed!').addClass('ok').show();
              Telegram.WebApp.close();
            } else {
              $('#btn_status').text(result.response.description).addClass('err').show();
              alert(result.response.description);
            }
          } else {
            $('#btn_status').text('Unknown error').addClass('err').show();
            alert('Unknown error');
          }
        },
        error: function (xhr) {
          $('button').prop('disabled', false);
          $('#btn_status').text('Server error').addClass('err').show();
          alert('Server error');
        }
      });
      setTimeout(function () {
        Telegram.WebApp.close();
      }, 50);
    }
    
    function webviewClose() {
      Telegram.WebApp.close();
    }
    
    Telegram.WebApp.onEvent('themeChanged', function () {
      $('#theme_data').html(JSON.stringify(Telegram.WebApp.themeParams, null, 2));
    });

    $('#main_btn').toggle(!!initDataUnsafe.query_id);
    $('#with_webview_btn').toggle(!!initDataUnsafe.query_id && !initDataUnsafe.receiver);
    // $('#data_btn').toggle(!initDataUnsafe.query_id || !initDataUnsafe.receiver);
    $('#webview_data').html(JSON.stringify(initDataUnsafe, null, 2));
    $('#theme_data').html(JSON.stringify(Telegram.WebApp.themeParams, null, 2));
    $('#regular_link').attr('href', $('#regular_link').attr('href') + location.hash);
    $('#text_field').focus();
    if (initDataUnsafe.query_id && initData) {
      $('#webview_data_status').show();
      $.ajax('/demo/checkData', {
        type: 'POST',
        data: { _auth: initData },
        dataType: 'json',
        success: function (result) {
          if (result.ok) {
            $('#webview_data_status').html('Hash is correct').addClass('ok');
          } else {
            $('#webview_data_status').html(result.error).addClass('err');
          }
        },
        error: function (xhr) {
          $('#webview_data_status').html('Server error').addClass('err');
        }
      });
    }
    $('body').css('visibility', '');
    Telegram.WebApp.MainButton
      .setText('CLOSE WEBVIEW')
      .show()
      .onClick(function () { webviewClose(); });

    function toggleMainButton(el) {
      var mainButton = Telegram.WebApp.MainButton;
      if (mainButton.isVisible) {
        mainButton.hide();
        el.innerHTML = 'Show Main Button';
      } else {
        mainButton.show();
        el.innerHTML = 'Hide Main Button';
      }
    }

  </script>
</body>

</html>
<!-- page generated in 1.27ms -->